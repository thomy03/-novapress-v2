{
  "metadata": {
    "project": "NovaPress AI v2",
    "version": "2.0.0-alpha",
    "last_updated": "2026-01-09",
    "total_features": 62,
    "total_subtasks": 31,
    "completed": 62,
    "in_progress": 0,
    "pending": 0,
    "deferred": 0,
    "last_session": "Session 9 Jan 2026: Phase 9 UI Refonte COMPLETE! Dark mode, BentoGrid, AnimatedCounter, IntelligenceHubPreview, FilsRouges enhanced, HomePage redesign. Bundle -37% (8.1kB -> 5.1kB). Build OK."
  },
  "phases": [
    {
      "id": "phase_1_security",
      "name": "Phase 1: Securite Critique",
      "priority": "P0",
      "estimated_days": 2,
      "features": [
        {
          "id": "SEC-001",
          "title": "Regenerer toutes les API keys",
          "description": "Les cles API sont exposees dans .env et potentiellement dans l'historique git",
          "files": [
            "backend/.env"
          ],
          "status": "completed",
          "blocking": true,
          "notes": "Cles API regenerees par l'utilisateur le 6 Jan 2026",
          "tests": [
            "Verifier que les anciennes cles ne fonctionnent plus"
          ]
        },
        {
          "id": "SEC-002",
          "title": "Nettoyer historique git des secrets",
          "description": "Utiliser git filter-branch pour supprimer .env de l'historique",
          "files": [
            ".git"
          ],
          "status": "completed",
          "blocking": true,
          "notes": "Verifie: .env n'a jamais ete commite dans l'historique git",
          "tests": [
            "git log --all --full-history -- backend/.env doit etre vide"
          ]
        },
        {
          "id": "SEC-003",
          "title": "Securiser ADMIN_API_KEY",
          "description": "Remplacer le fallback hardcode par une cle securisee dans .env",
          "files": [
            "backend/app/api/routes/admin.py",
            "backend/.env"
          ],
          "status": "completed",
          "blocking": true,
          "tests": [
            "API admin doit rejeter 'novapress-admin-2024'"
          ]
        },
        {
          "id": "SEC-004",
          "title": "Desactiver DEBUG en production",
          "description": "Changer DEBUG=True en DEBUG=False dans .env",
          "files": [
            "backend/.env",
            "backend/app/core/config.py"
          ],
          "status": "completed",
          "blocking": true,
          "tests": [
            "Stack traces non visibles sur erreur 500"
          ]
        },
        {
          "id": "SEC-005",
          "title": "Creer .env.example securise",
          "description": "Template .env sans valeurs sensibles pour nouveaux devs",
          "files": [
            "backend/.env.example"
          ],
          "status": "completed",
          "blocking": false,
          "tests": [
            "Fichier existe et ne contient pas de vraies cles"
          ]
        }
      ]
    },
    {
      "id": "phase_2_stability",
      "name": "Phase 2: Stabilite Application",
      "priority": "P0-P1",
      "estimated_days": 5,
      "features": [
        {
          "id": "STAB-001",
          "title": "Ajouter Error Boundary React",
          "description": "Envelopper l'app dans un Error Boundary pour eviter les crashes complets",
          "files": [
            "app/components/ErrorBoundary.tsx",
            "app/layout.tsx"
          ],
          "status": "completed",
          "blocking": true,
          "tests": [
            "Throw error dans un composant ne fait pas crash toute l'app"
          ]
        },
        {
          "id": "STAB-002",
          "title": "Fix WebSocket memory leak admin",
          "description": "Cleanup des reconnexions WebSocket avec AbortController",
          "files": [
            "app/admin/pipeline/page.tsx"
          ],
          "status": "completed",
          "blocking": true,
          "tests": [
            "Pas de nouvelles connexions WS apres unmount du composant"
          ]
        },
        {
          "id": "STAB-003",
          "title": "Fix race condition toggleTag",
          "description": "Remplacer par action TOGGLE_TAG atomique",
          "files": [
            "app/contexts/ArticlesContext.tsx"
          ],
          "status": "completed",
          "blocking": false,
          "tests": [
            "Double-click rapide sur tag ne cree pas d'etat incoherent"
          ]
        },
        {
          "id": "STAB-004",
          "title": "Ajouter AbortController aux fetchs",
          "description": "Eviter setState after unmount sur toutes les pages",
          "files": [
            "app/synthesis/[id]/page.tsx",
            "app/article/[id]/page.tsx",
            "app/live/page.tsx"
          ],
          "status": "completed",
          "blocking": false,
          "tests": [
            "Pas de warning 'setState on unmounted component'"
          ]
        },
        {
          "id": "STAB-005",
          "title": "Null checks systematiques API",
          "description": "Verifier response.data avant utilisation partout",
          "files": [
            "app/synthesis/[id]/page.tsx",
            "app/live/page.tsx",
            "app/article/[id]/page.tsx"
          ],
          "status": "completed",
          "blocking": true,
          "tests": [
            "API retournant null ne fait pas crash"
          ]
        },
        {
          "id": "STAB-006",
          "title": "Fix gestion erreur JSON LLM",
          "description": "Retourner fallback structure au lieu de {} vide",
          "files": [
            "backend/app/ml/llm.py"
          ],
          "status": "completed",
          "blocking": true,
          "tests": [
            "JSON invalide du LLM genere quand meme une synthese partielle"
          ]
        },
        {
          "id": "STAB-007",
          "title": "Fix race condition pipeline manager",
          "description": "Utiliser Redis pour etat global au lieu de singleton",
          "files": [
            "backend/app/services/pipeline_manager.py"
          ],
          "status": "completed",
          "blocking": false,
          "tests": [
            "Deux workers ne peuvent pas lancer le pipeline simultanement"
          ]
        },
        {
          "id": "STAB-008",
          "title": "Ajouter retry logic API externes",
          "description": "Retry avec backoff exponentiel pour Perplexity/Grok/OpenRouter",
          "files": [
            "backend/app/ml/search_enrichment.py",
            "backend/app/ml/llm.py"
          ],
          "status": "completed",
          "blocking": false,
          "tests": [
            "Erreur 429 temporaire ne fait pas echouer le pipeline"
          ]
        },
        {
          "id": "STAB-009",
          "title": "Validation structure causal_chain",
          "description": "Valider que chaque relation a cause/effect/type",
          "files": [
            "backend/app/services/pipeline.py",
            "backend/app/ml/causal_extraction.py"
          ],
          "status": "completed",
          "blocking": false,
          "tests": [
            "Relation sans 'type' est filtree"
          ]
        },
        {
          "id": "STAB-010",
          "title": "Ajouter timeout scraping par source",
          "description": "Timeout 30s par source pour eviter blocage pipeline",
          "files": [
            "backend/app/services/advanced_scraper.py"
          ],
          "status": "completed",
          "blocking": false,
          "tests": [
            "Source lente (>30s) est skipee sans bloquer"
          ]
        }
      ]
    },
    {
      "id": "phase_3_performance",
      "name": "Phase 3: Performance",
      "priority": "P1-P2",
      "estimated_days": 7,
      "features": [
        {
          "id": "PERF-001",
          "title": "Implementer React Query caching",
          "description": "Cache les syntheses/articles deja visitees",
          "files": [
            "app/lib/api/",
            "app/synthesis/[id]/page.tsx",
            "app/components/Providers.tsx",
            "app/hooks/useQueries.ts"
          ],
          "status": "completed",
          "blocking": false,
          "tests": [
            "Retour sur synthese deja visitee = pas de fetch"
          ]
        },
        {
          "id": "PERF-002",
          "title": "Lazy load composants lourds",
          "description": "Dynamic import pour React Flow et graphes",
          "files": [
            "app/components/causal/index.ts"
          ],
          "status": "completed",
          "blocking": false,
          "tests": [
            "Bundle initial ne contient pas reactflow"
          ]
        },
        {
          "id": "PERF-003",
          "title": "Cache embeddings dans Redis",
          "description": "Eviter recalcul embeddings pour articles deja vus",
          "files": [
            "backend/app/ml/embeddings.py"
          ],
          "status": "completed",
          "blocking": false,
          "tests": [
            "Article deja encode = lookup Redis au lieu de calcul"
          ]
        },
        {
          "id": "PERF-004",
          "title": "Creer .dockerignore",
          "description": "Exclure node_modules, .next, .git, .venv",
          "files": [
            ".dockerignore",
            "backend/.dockerignore"
          ],
          "status": "completed",
          "notes": "Deja cree - existe dans root et backend",
          "blocking": false,
          "tests": [
            "Image Docker < 600MB"
          ]
        },
        {
          "id": "PERF-005",
          "title": "Optimiser deduplication embeddings",
          "description": "Ne pas recalculer embeddings deja dans Qdrant",
          "files": [
            "backend/app/ml/embeddings.py"
          ],
          "status": "completed",
          "notes": "Couvert par PERF-003 - Redis cache gere automatiquement",
          "blocking": false,
          "tests": [
            "Pipeline avec 50% articles connus = 50% moins de calculs"
          ]
        }
      ]
    },
    {
      "id": "phase_4_quality",
      "name": "Phase 4: Qualite Code",
      "priority": "P2",
      "estimated_days": 14,
      "features": [
        {
          "id": "QUAL-001",
          "title": "Centraliser types TypeScript",
          "description": "Utiliser app/types/api.ts partout, supprimer duplications",
          "files": [
            "app/types/api.ts"
          ],
          "status": "completed",
          "notes": "Types centralises - Persona, Causal, Timeline ajoutes",
          "blocking": false,
          "tests": [
            "Aucune interface Synthesis definie localement"
          ]
        },
        {
          "id": "QUAL-002",
          "title": "Creer composant ErrorState unifie",
          "description": "Remplacer les differentes erreurs par un composant reutilisable",
          "files": [
            "app/components/ui/ErrorState.tsx"
          ],
          "status": "completed",
          "blocking": false,
          "tests": [
            "Meme UI erreur sur toutes les pages"
          ]
        },
        {
          "id": "QUAL-003",
          "title": "Creer composant LoadingState unifie",
          "description": "Skeleton loading coherent",
          "files": [
            "app/components/ui/LoadingState.tsx"
          ],
          "status": "completed",
          "blocking": false,
          "tests": [
            "Meme skeleton sur toutes les pages"
          ]
        },
        {
          "id": "QUAL-004",
          "title": "Remplacer inline style mutations",
          "description": "Utiliser CSS/state au lieu de direct DOM mutations",
          "files": [
            "app/globals.css",
            "app/components/layout/Navigation.tsx",
            "app/components/ui/ErrorState.tsx"
          ],
          "status": "completed",
          "notes": "CSS utility classes ajoutees, composants cles refactorises",
          "blocking": false,
          "tests": [
            "Aucun e.currentTarget.style dans le code"
          ]
        },
        {
          "id": "QUAL-005",
          "title": "Configurer log level backend",
          "description": "Ajouter LOG_LEVEL env var, reduire verbosity",
          "files": [
            "backend/app/core/config.py",
            "backend/app/main.py"
          ],
          "status": "completed",
          "notes": "LOG_LEVEL configurable via .env, loguru configure dans main.py",
          "blocking": false,
          "tests": [
            "LOG_LEVEL=warning ne montre que warnings+"
          ]
        },
        {
          "id": "QUAL-006",
          "title": "Supprimer code dead YouTube",
          "description": "Nettoyer le code YouTube commente",
          "files": [
            "backend/app/services/pipeline.py",
            "backend/app/services/social_scraper.py",
            "backend/app/core/config.py"
          ],
          "status": "completed",
          "notes": "Code YouTube supprime de config, scraper et pipeline",
          "blocking": false,
          "tests": [
            "Aucune reference YouTube dans le code"
          ]
        },
        {
          "id": "QUAL-007",
          "title": "Tests unitaires llm.py",
          "description": "Couvrir les fonctions critiques de llm.py",
          "files": [
            "backend/tests/test_llm.py"
          ],
          "status": "completed",
          "notes": "Tests pour generate, retry logic, JSON parsing",
          "blocking": false,
          "tests": [
            "pytest backend/tests/test_llm.py passe"
          ]
        },
        {
          "id": "QUAL-008",
          "title": "Tests unitaires clustering.py",
          "description": "Couvrir les fonctions de clustering",
          "files": [
            "backend/tests/test_clustering.py"
          ],
          "status": "completed",
          "notes": "Tests coherence, sub-clustering, validation",
          "blocking": false,
          "tests": [
            "pytest backend/tests/test_clustering.py passe"
          ]
        }
      ]
    },
    {
      "id": "phase_5_accessibility",
      "name": "Phase 5: Accessibilite",
      "priority": "P2",
      "estimated_days": 5,
      "features": [
        {
          "id": "A11Y-001",
          "title": "Ajouter aria-* aux boutons",
          "description": "aria-label, aria-busy, aria-describedby sur tous les boutons",
          "files": [
            "app/admin/pipeline/page.tsx",
            "app/components/layout/Navigation.tsx"
          ],
          "status": "completed",
          "notes": "aria-label, aria-busy, aria-disabled ajoutes aux boutons admin et navigation",
          "blocking": false,
          "tests": [
            "Lighthouse Accessibility > 90"
          ]
        },
        {
          "id": "A11Y-002",
          "title": "Ajouter labels aux inputs",
          "description": "Associer <label> avec htmlFor sur tous les formulaires",
          "files": [
            "app/admin/pipeline/page.tsx",
            "app/components/ui/SearchBar.tsx"
          ],
          "status": "completed",
          "notes": "htmlFor ajoute aux labels admin, role=search sur SearchBar",
          "blocking": false,
          "tests": [
            "Aucun input sans label associe"
          ]
        },
        {
          "id": "A11Y-003",
          "title": "Implementer focus management",
          "description": "Navigation clavier coherente",
          "files": [
            "app/layout.tsx",
            "app/globals.css"
          ],
          "status": "completed",
          "notes": "Skip-to-content link ajoute, focus styles dans globals.css",
          "blocking": false,
          "tests": [
            "Navigation complete au clavier possible"
          ]
        }
      ]
    },
    {
      "id": "phase_6_features",
      "name": "Phase 6: Nouvelles Fonctionnalites",
      "priority": "P2-P3",
      "estimated_days": 21,
      "features": [
        {
          "id": "FEAT-001",
          "title": "Pre-generation multi-personas",
          "description": "Generer toutes les versions persona au moment du pipeline",
          "files": [
            "backend/app/services/pipeline.py",
            "backend/app/core/config.py",
            "backend/.env.example"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "Configurable via ENABLE_PERSONA_PREGENERATION et PERSONA_PREGENERATION_LIST dans .env",
          "tests": [
            "Synthese a 5 versions persona stockees apres pipeline"
          ]
        },
        {
          "id": "FEAT-002",
          "title": "Quality reviewers personas",
          "description": "Evaluer qualite des syntheses persona automatiquement",
          "files": [
            "backend/app/ml/persona_quality.py",
            "backend/app/services/pipeline.py",
            "backend/app/api/routes/syntheses.py"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "PersonaQualityReviewer cree avec analyse ton, marqueurs style, signature, vocabulaire. Integre dans pipeline (pre-generation) et API (on-demand). Score < 0.6 = fallback neutral.",
          "tests": [
            "Score qualite < 0.6 = regeneration ou fallback neutral"
          ]
        },
        {
          "id": "FEAT-003",
          "title": "Fix graphes causaux vides",
          "description": "Renforcer prompt LLM + ameliorer fallback regex",
          "files": [
            "backend/app/ml/llm.py",
            "backend/app/ml/causal_extraction.py"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "Prompts LLM renforces (causal_chain obligatoire dans toutes les methodes synthesis). Patterns regex etendus (45 patterns FR+EN). Fallback generation depuis key_points si aucune relation detectee.",
          "tests": [
            "90% des syntheses ont au moins 3 relations causales"
          ]
        },
        {
          "id": "FEAT-004",
          "title": "Monitoring Prometheus",
          "description": "Ajouter metriques cles (duration, errors, counts)",
          "files": [
            "backend/app/main.py",
            "backend/app/core/metrics.py"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "Module metrics.py cree avec Counters, Histograms, Gauges pour pipeline, API, LLM, scraping. Endpoint /metrics expose en format Prometheus. Decorators et context managers pour tracking facile.",
          "tests": [
            "Endpoint /metrics retourne format Prometheus"
          ]
        },
        {
          "id": "FEAT-005",
          "title": "API versioning",
          "description": "Prefixer routes avec /api/v1/",
          "files": [
            "backend/app/core/config.py",
            "app/lib/api/config.ts"
          ],
          "status": "completed",
          "notes": "API_V1_PREFIX=/api/v1 dans backend, endpoints frontend mis a jour",
          "blocking": false,
          "tests": [
            "/api/v1/syntheses fonctionne"
          ]
        },
        {
          "id": "FEAT-006",
          "title": "Rate limiting routes publiques",
          "description": "Appliquer slowapi sur /syntheses et /search",
          "files": [
            "backend/app/api/routes/syntheses.py",
            "backend/app/api/routes/search.py",
            "backend/app/api/routes/articles.py",
            "backend/app/api/routes/trending.py"
          ],
          "status": "completed",
          "notes": "Rate limits: articles 100-200/min, search 30/min, syntheses 60-120/min, persona 10/min",
          "blocking": false,
          "tests": [
            "101eme requete/minute retourne 429"
          ]
        },
        {
          "id": "FEAT-007",
          "title": "Circuit breaker API externes",
          "description": "Ouvrir circuit apres N echecs consecutifs",
          "files": [
            "backend/app/core/circuit_breaker.py",
            "backend/app/ml/llm.py",
            "backend/app/ml/search_enrichment.py",
            "backend/app/api/routes/admin.py"
          ],
          "status": "completed",
          "notes": "Circuit breakers pour openrouter, perplexity, xai. Endpoint /admin/circuit-breakers pour monitoring.",
          "blocking": false,
          "tests": [
            "Apres 5 echecs, API externe skipee pendant 60s"
          ]
        }
      ]
    },
    {
      "id": "phase_7_devops",
      "name": "Phase 7: DevOps & Infrastructure",
      "priority": "P2-P3",
      "estimated_days": 10,
      "features": [
        {
          "id": "DEVOPS-001",
          "title": "Dockerfile multi-stage backend",
          "description": "Multi-stage build avec utilisateur non-root",
          "files": [
            "backend/Dockerfile"
          ],
          "status": "completed",
          "notes": "Builder + production stages, user novapress, venv isole",
          "blocking": false,
          "tests": [
            "Container ne tourne pas en root"
          ]
        },
        {
          "id": "DEVOPS-002",
          "title": "Docker Compose production",
          "description": "docker-compose.prod.yml avec configs securisees",
          "files": [
            "docker-compose.prod.yml"
          ],
          "status": "completed",
          "notes": "API_V1_PREFIX, LOG_LEVEL, ADMIN_API_KEY, enrichment APIs configures",
          "blocking": false,
          "tests": [
            "docker-compose -f docker-compose.prod.yml up fonctionne"
          ]
        },
        {
          "id": "DEVOPS-003",
          "title": "GitHub Actions CI",
          "description": "Tests, lint, type-check, security scan",
          "files": [
            ".github/workflows/ci.yml"
          ],
          "status": "completed",
          "notes": "Backend tests + lint, frontend typecheck + build, security scan",
          "blocking": false,
          "tests": [
            "CI passe sur push main/develop"
          ]
        },
        {
          "id": "DEVOPS-004",
          "title": "GitHub Actions CD",
          "description": "Build et push images Docker",
          "files": [
            ".github/workflows/cd.yml"
          ],
          "status": "completed",
          "notes": "Build multi-platform, push ghcr.io, staging/production environments",
          "blocking": false,
          "tests": [
            "Images poussees sur ghcr.io apres merge main"
          ]
        },
        {
          "id": "DEVOPS-005",
          "title": "Health checks Kubernetes",
          "description": "Endpoints /health, /health/live, /health/ready",
          "files": [
            "backend/app/main.py"
          ],
          "status": "completed",
          "notes": "Liveness simple, readiness verifie Qdrant + embeddings + circuit breakers",
          "blocking": false,
          "tests": [
            "/health/ready retourne 503 si Qdrant down"
          ]
        },
        {
          "id": "DEVOPS-006",
          "title": "Synchroniser requirements",
          "description": "Aligner requirements-locked.txt avec versions installees",
          "files": [
            "backend/requirements-locked.txt"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "Versions mises a jour (Jan 2026), hdbscan/umap retires (utilise sklearn.cluster.HDBSCAN), torch CPU-only, packages manquants ajoutes (email-validator, slowapi, lxml_html_clean)",
          "tests": [
            "pip install -r requirements-locked.txt sans erreur"
          ]
        }
      ]
    },
    {
      "id": "phase_8_refactoring",
      "name": "Phase 8: Refactoring & Performance (Audit Jan 2026)",
      "priority": "P1-P2",
      "estimated_days": 5,
      "features": [
        {
          "id": "REF-001",
          "title": "Fix N+1 Query Qdrant",
          "description": "Remplacer boucle 20 appels par batch retrieval unique",
          "files": [
            "backend/app/api/routes/syntheses.py",
            "backend/app/db/qdrant_client.py"
          ],
          "status": "completed",
          "blocking": true,
          "notes": "Ajoute get_articles_by_ids() dans qdrant_client.py, modifie _enrich_source_articles_from_article_ids() pour batch retrieval",
          "tests": [
            "1 seul appel Qdrant dans logs pour enrichissement sources",
            "Latence /syntheses/by-id/{id} < 500ms"
          ]
        },
        {
          "id": "REF-002",
          "title": "Compiler Regex au niveau module",
          "description": "_reformat_monolithic_text() compile 5 regex a chaque appel",
          "files": [
            "backend/app/api/routes/syntheses.py"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "17 patterns regex compiles en constantes module-level (PATTERN_TRANSITION, PATTERNS_TECHNICAL_MARKERS, etc.)",
          "tests": [
            "re.compile() appele uniquement au import, pas a chaque requete"
          ]
        },
        {
          "id": "REF-003",
          "title": "Ajouter Cache-Control headers",
          "description": "Endpoints /breaking, /live, / sans cache HTTP",
          "files": [
            "backend/app/api/routes/syntheses.py",
            "backend/app/api/routes/trending.py"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "JSONResponse avec Cache-Control: public, max-age=30 (breaking), max-age=60 (live, syntheses)",
          "tests": [
            "Response header Cache-Control present sur /syntheses/breaking"
          ]
        },
        {
          "id": "REF-004",
          "title": "Fix flags config conflictuels",
          "description": "SINGLE_PERSONA_MODE et ENABLE_PERSONA_PREGENERATION mutuellement exclusifs",
          "files": [
            "backend/app/core/config.py",
            "backend/app/services/pipeline.py"
          ],
          "status": "completed",
          "blocking": true,
          "notes": "Ajoute effective_pregeneration_enabled et personas_to_pregenerate properties, pipeline utilise ces properties",
          "tests": [
            "Validation au startup si les deux sont True"
          ]
        },
        {
          "id": "REF-005",
          "title": "Fix double infinite scroll",
          "description": "IntersectionObserver ET scroll listener actifs (race conditions)",
          "files": [
            "app/hooks/useInfiniteScroll.ts"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "Supprime fallback scroll listener (lignes 53-64). IntersectionObserver seul (98%+ browser support)",
          "tests": [
            "Un seul observer actif (IntersectionObserver)"
          ]
        },
        {
          "id": "REF-006",
          "title": "ArticlesContext useMemo",
          "description": "filteredArticles stocke dans state au lieu de calcule",
          "files": [
            "app/contexts/ArticlesContext.tsx"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "filteredArticles supprime du state/reducer. useMemo pour filtrage local, useState separe pour API search results. Elimine re-renders inutiles.",
          "tests": [
            "filteredArticles calcule via useMemo, pas dans reducer"
          ]
        },
        {
          "id": "REF-007",
          "title": "Supprimer @playwright/test",
          "description": "Dependance 50MB inutilisee (0 tests)",
          "files": [
            "package.json"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "Dependance retiree de package.json. Economie ~50MB",
          "tests": [
            "npm ls @playwright/test retourne not found"
          ]
        },
        {
          "id": "REF-008",
          "title": "Supprimer causal graphs orphelins",
          "description": "TreeCausalGraph, TimelineCausalGraph, CausalFlowView jamais importes",
          "files": [
            "app/components/causal/TreeCausalGraph.tsx",
            "app/components/causal/TimelineCausalGraph.tsx",
            "app/components/causal/CausalFlowView.tsx",
            "app/components/causal/index.tsx"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "3 fichiers supprimes (~1200 LOC dead code). Index.tsx mis a jour. Elimine aussi erreurs TypeScript liees.",
          "tests": [
            "grep -r TreeCausalGraph app/ retourne 0 resultats"
          ]
        },
        {
          "id": "REF-009",
          "title": "Alt text images hero",
          "description": "HeroArticle.tsx:63 a alt vide",
          "files": [
            "app/components/articles/HeroArticle.tsx",
            "app/components/articles/CompactArticleCard.tsx",
            "app/components/articles/SecondaryArticleRow.tsx",
            "app/components/articles/SynthesisCompactCard.tsx"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "4 fichiers corriges: alt='' remplace par alt={title}. Conformite WCAG.",
          "tests": [
            "Lighthouse Accessibility > 95"
          ]
        },
        {
          "id": "REF-010",
          "title": "ARIA modales auth",
          "description": "LoginModal/SignupModal sans role=dialog, focus trap",
          "files": [
            "app/components/auth/LoginModal.tsx",
            "app/components/auth/SignupModal.tsx"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "role=dialog, aria-modal, aria-labelledby, focus trap, Escape handler, htmlFor labels, autoComplete, aria-busy ajoutes aux deux modales",
          "tests": [
            "Navigation clavier complete dans modale",
            "Escape ferme la modale"
          ]
        },
        {
          "id": "REF-011",
          "title": "Consolider type Category",
          "description": "Category definie dans api.ts ET Article.ts",
          "files": [
            "app/types/api.ts",
            "app/types/Article.ts"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "Category consolide dans api.ts avec tous les champs. Article.ts reexporte depuis api.ts.",
          "tests": [
            "Une seule definition Category exportee"
          ]
        },
        {
          "id": "REF-012",
          "title": "Server Component synthesis page",
          "description": "Convertir synthesis/[id]/page.tsx en Server Component + ISR - Decompose en 8 sous-taches",
          "files": [
            "app/synthesis/[id]/page.tsx",
            "app/types/synthesis-page.ts",
            "app/components/synthesis/"
          ],
          "status": "completed",
          "blocking": false,
          "notes": "COMPLETE: 5 agents paralleles ont extrait les composants. Server Component avec revalidate=300. Build OK (16.2kB). Fixes TypeScript pre-existants corrigees (keyword type, relates_to, Category export).",
          "tests": [
            "Page rendue cote serveur (pas de use client en haut)",
            "revalidate=300 present"
          ],
          "subtasks": [
            {
              "id": "REF-012a",
              "title": "Types partages SynthesisPageProps",
              "description": "Creer app/types/synthesis-page.ts avec interfaces partagees",
              "status": "completed",
              "blocking": true
            },
            {
              "id": "REF-012b",
              "title": "Extraire SynthesisHeader.tsx",
              "description": "Client Component: titre, metadata, badges, update notice",
              "status": "completed",
              "blocking": false
            },
            {
              "id": "REF-012c",
              "title": "Extraire SynthesisBody.tsx",
              "description": "Client Component: introduction, body paragraphs, analysis, key points",
              "status": "completed",
              "blocking": false
            },
            {
              "id": "REF-012d",
              "title": "Extraire PersonaSection.tsx",
              "description": "Client Component: PersonaSwitcher, persona indicator, signature",
              "status": "completed",
              "blocking": false
            },
            {
              "id": "REF-012e",
              "title": "Extraire CausalSection.tsx",
              "description": "Client Component: TangleCausalGraph wrapper, NodeDetailPanel",
              "status": "completed",
              "blocking": false
            },
            {
              "id": "REF-012f",
              "title": "Extraire SourcesSection.tsx",
              "description": "Client Component: sources list, enrichment display",
              "status": "completed",
              "blocking": false
            },
            {
              "id": "REF-012g",
              "title": "Assembler Server Component + ISR",
              "description": "Convertir page.tsx en Server Component avec revalidate=300",
              "status": "completed",
              "blocking": false,
              "depends_on": ["REF-012a", "REF-012b", "REF-012c", "REF-012d", "REF-012e", "REF-012f"]
            },
            {
              "id": "REF-012h",
              "title": "Tests de non-regression (TNR)",
              "description": "Verifier rendu, navigation, interactivite persona/causal",
              "status": "completed",
              "blocking": false,
              "depends_on": ["REF-012g"]
            }
          ]
        }
      ]
    },
    {
      "id": "phase_9_ui_refonte",
      "name": "Phase 9: UI Refonte - Design Moderne",
      "priority": "P1",
      "estimated_days": 7,
      "features": [
        {
          "id": "UI-001",
          "title": "Dark mode par defaut",
          "description": "Activer le dark mode par defaut dans ThemeContext - Decompose en 3 sous-taches",
          "files": [
            "app/contexts/ThemeContext.tsx",
            "app/globals.css"
          ],
          "status": "completed",
          "blocking": true,
          "notes": "useLocalStorage('theme-dark-mode', true) - ignore system preference",
          "tests": [
            "TNR-UI-001: Page charge en dark mode sans intervention utilisateur",
            "TNR-UI-001: localStorage theme-dark-mode = true par defaut",
            "TNR-UI-001: Toggle fonctionne toujours (light <-> dark)"
          ],
          "subtasks": [
            {
              "id": "UI-001a",
              "title": "Modifier ThemeContext default value",
              "description": "Changer useLocalStorage default de systemDarkMode a true",
              "status": "completed",
              "blocking": true
            },
            {
              "id": "UI-001b",
              "title": "Supprimer import useIsDarkMode inutilise",
              "description": "Cleanup du code apres modification",
              "status": "completed",
              "blocking": false
            },
            {
              "id": "UI-001c",
              "title": "TNR Dark Mode",
              "description": "Verifier first load, localStorage, toggle functionality",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-001a", "UI-001b"]
            }
          ]
        },
        {
          "id": "UI-002",
          "title": "Bento Grid Layout System",
          "description": "Systeme de grille asymetrique style Bento - Decompose en 6 sous-taches",
          "files": [
            "app/types/bento.ts",
            "app/components/layout/BentoGrid.tsx",
            "app/components/layout/BentoCard.tsx"
          ],
          "status": "completed",
          "notes": "Types bento.ts, BentoCard.tsx, BentoGrid.tsx crees. 4 tailles: small/medium/large/featured. CSS Grid responsive.",
          "blocking": true,
          "tests": [
            "TNR-UI-002: Grille affiche cartes de 4 tailles (small, medium, large, featured)",
            "TNR-UI-002: Responsive 1 col mobile, 2 col tablet, 4 col desktop",
            "TNR-UI-002: Dark mode styles coherents",
            "TNR-UI-002: Animations hover fluides"
          ],
          "subtasks": [
            {
              "id": "UI-002a",
              "title": "Creer types BentoGrid",
              "description": "app/types/bento.ts - BentoCardSize, BentoCardProps, BentoGridProps",
              "status": "pending",
              "blocking": true
            },
            {
              "id": "UI-002b",
              "title": "Creer composant BentoCard",
              "description": "Carte individuelle avec variantes: small (1x1), medium (2x1), large (2x2), featured (4x2)",
              "status": "pending",
              "blocking": true,
              "depends_on": ["UI-002a"]
            },
            {
              "id": "UI-002c",
              "title": "Creer composant BentoGrid container",
              "description": "Container CSS Grid avec gap, responsive breakpoints",
              "status": "pending",
              "blocking": true,
              "depends_on": ["UI-002a"]
            },
            {
              "id": "UI-002d",
              "title": "Styles responsive et dark mode",
              "description": "Media queries: 640px (sm), 768px (md), 1024px (lg), 1280px (xl)",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-002b", "UI-002c"]
            },
            {
              "id": "UI-002e",
              "title": "Animations hover et transitions",
              "description": "Scale, shadow, border effects au hover avec theme.hover",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-002d"]
            },
            {
              "id": "UI-002f",
              "title": "TNR Bento Grid",
              "description": "Test visuel sur mobile/tablet/desktop, dark/light mode",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-002e"]
            }
          ]
        },
        {
          "id": "UI-003",
          "title": "Animated Stat Counters",
          "description": "Compteurs animes avec count-up effect - Decompose en 4 sous-taches",
          "files": [
            "app/components/ui/AnimatedCounter.tsx",
            "app/hooks/useCountUp.ts"
          ],
          "status": "completed",
          "notes": "useCountUp hook avec IntersectionObserver. AnimatedCounter + StatCard components. formatNumber (K/M/B).",
          "blocking": false,
          "tests": [
            "TNR-UI-003: Animation fluide de 0 a valeur finale",
            "TNR-UI-003: Declenche au scroll (IntersectionObserver)",
            "TNR-UI-003: Supporte formatage (1000 -> 1K, 1000000 -> 1M)",
            "TNR-UI-003: Prefixe/suffixe optionnels (ex: '53 sources')"
          ],
          "subtasks": [
            {
              "id": "UI-003a",
              "title": "Creer hook useCountUp",
              "description": "Custom hook avec easing, duration, IntersectionObserver trigger",
              "status": "pending",
              "blocking": true
            },
            {
              "id": "UI-003b",
              "title": "Creer composant AnimatedCounter",
              "description": "Composant avec props: value, duration, prefix, suffix, format",
              "status": "pending",
              "blocking": true,
              "depends_on": ["UI-003a"]
            },
            {
              "id": "UI-003c",
              "title": "Formatage nombres (K, M, B)",
              "description": "Fonction formatNumber avec seuils configurables",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-003b"]
            },
            {
              "id": "UI-003d",
              "title": "TNR Animated Counter",
              "description": "Test animation, scroll trigger, formatage",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-003c"]
            }
          ]
        },
        {
          "id": "UI-004",
          "title": "Intelligence Hub Preview Section",
          "description": "Section proeminente homepage avec stats et apercu graphe - Decompose en 7 sous-taches",
          "files": [
            "app/components/intelligence/IntelligenceHubPreview.tsx",
            "app/components/intelligence/MiniCausalGraph.tsx",
            "app/components/intelligence/StatsCard.tsx",
            "app/lib/api/services/stats.ts"
          ],
          "status": "completed",
          "notes": "IntelligenceHubPreview avec stats grid + MiniCausalGraph. Service stats.ts avec cache. CTA vers /intelligence.",
          "blocking": false,
          "tests": [
            "TNR-UI-004: Affiche 4 stats (sources, syntheses, relations, accuracy)",
            "TNR-UI-004: Mini-graphe causal interactif (hover nodes)",
            "TNR-UI-004: CTA 'Explorer Intelligence Hub' vers /intelligence",
            "TNR-UI-004: Loading state avec skeleton",
            "TNR-UI-004: Error state gracieux"
          ],
          "subtasks": [
            {
              "id": "UI-004a",
              "title": "Creer service API stats globales",
              "description": "app/lib/api/services/stats.ts - getGlobalStats() avec cache",
              "status": "pending",
              "blocking": true
            },
            {
              "id": "UI-004b",
              "title": "Creer composant StatsCard",
              "description": "Carte stat individuelle avec AnimatedCounter et icone",
              "status": "pending",
              "blocking": true,
              "depends_on": ["UI-003b"]
            },
            {
              "id": "UI-004c",
              "title": "Creer composant MiniCausalGraph",
              "description": "Version simplifiee du graphe causal (5-7 noeuds max)",
              "status": "pending",
              "blocking": true
            },
            {
              "id": "UI-004d",
              "title": "Creer composant IntelligenceHubPreview",
              "description": "Container avec titre, stats row, mini-graphe, CTA",
              "status": "pending",
              "blocking": true,
              "depends_on": ["UI-004a", "UI-004b", "UI-004c"]
            },
            {
              "id": "UI-004e",
              "title": "Styles dark mode et responsive",
              "description": "Adaptation theme.bg, theme.card, breakpoints",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-004d"]
            },
            {
              "id": "UI-004f",
              "title": "Loading et error states",
              "description": "Skeleton loading, fallback error gracieux",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-004d"]
            },
            {
              "id": "UI-004g",
              "title": "TNR Intelligence Hub Preview",
              "description": "Test API, animations, responsive, error handling",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-004e", "UI-004f"]
            }
          ]
        },
        {
          "id": "UI-005",
          "title": "Enhanced Fils Rouges Section",
          "description": "Section Fils Rouges enrichie avec mini-timeline - Decompose en 5 sous-taches",
          "files": [
            "app/components/topics/FilsRougesSection.tsx",
            "app/components/topics/TopicMiniTimeline.tsx",
            "app/components/topics/NarrativeArcIndicator.tsx"
          ],
          "status": "completed",
          "notes": "NarrativeArcIndicator (5 phases), TopicMiniTimeline, FilsRougesSection avec hover expand panels. CSS animations.",
          "blocking": false,
          "tests": [
            "TNR-UI-005: Mini-timeline par topic (3 derniers evenements)",
            "TNR-UI-005: Indicateur visuel narrative arc (emerging/developing/peak/declining)",
            "TNR-UI-005: Hover expand pour voir plus de details",
            "TNR-UI-005: Animation transition entre etats"
          ],
          "subtasks": [
            {
              "id": "UI-005a",
              "title": "Creer composant NarrativeArcIndicator",
              "description": "Badge visuel avec couleur et icone selon arc phase",
              "status": "pending",
              "blocking": true
            },
            {
              "id": "UI-005b",
              "title": "Creer composant TopicMiniTimeline",
              "description": "Timeline horizontale compacte (3 points max)",
              "status": "pending",
              "blocking": true
            },
            {
              "id": "UI-005c",
              "title": "Refactorer FilsRougesSection",
              "description": "Integrer NarrativeArcIndicator et TopicMiniTimeline",
              "status": "pending",
              "blocking": true,
              "depends_on": ["UI-005a", "UI-005b"]
            },
            {
              "id": "UI-005d",
              "title": "Hover expand interaction",
              "description": "Au hover sur topic, expand pour montrer timeline",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-005c"]
            },
            {
              "id": "UI-005e",
              "title": "TNR Fils Rouges Enhanced",
              "description": "Test hover, timeline, arc indicators, responsive",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-005d"]
            }
          ]
        },
        {
          "id": "UI-006",
          "title": "Homepage Redesign Integration",
          "description": "Integration de tous les composants dans nouveau layout - Decompose en 6 sous-taches",
          "files": [
            "app/components/pages/HomePage.tsx",
            "app/page.tsx"
          ],
          "status": "completed",
          "notes": "Layout: IntelligenceHub -> FilsRouges -> BentoGrid -> Newsletter. Lazy loading avec next/dynamic. Bundle -37%.",
          "blocking": false,
          "depends_on": ["UI-002", "UI-003", "UI-004", "UI-005"],
          "tests": [
            "TNR-UI-006: Design coherent dark mode sur toute la page",
            "TNR-UI-006: Bento grid avec syntheses recentes",
            "TNR-UI-006: Intelligence Hub Preview visible above fold",
            "TNR-UI-006: Fils Rouges enhanced avec timeline",
            "TNR-UI-006: Performance LCP < 2.5s",
            "TNR-UI-006: No Cumulative Layout Shift (CLS < 0.1)"
          ],
          "subtasks": [
            {
              "id": "UI-006a",
              "title": "Reorganiser structure HomePage",
              "description": "Nouveau layout: Hero -> Intelligence -> Bento -> Fils Rouges -> Newsletter",
              "status": "pending",
              "blocking": true,
              "depends_on": ["UI-002f", "UI-004g", "UI-005e"]
            },
            {
              "id": "UI-006b",
              "title": "Integrer BentoGrid avec syntheses",
              "description": "Mapper syntheses recentes sur BentoCards",
              "status": "pending",
              "blocking": true,
              "depends_on": ["UI-006a"]
            },
            {
              "id": "UI-006c",
              "title": "Integrer IntelligenceHubPreview",
              "description": "Positionner above fold avec animation entree",
              "status": "pending",
              "blocking": true,
              "depends_on": ["UI-006a"]
            },
            {
              "id": "UI-006d",
              "title": "Integrer FilsRougesSection enhanced",
              "description": "Remplacer ancienne section par nouvelle version",
              "status": "pending",
              "blocking": true,
              "depends_on": ["UI-006a"]
            },
            {
              "id": "UI-006e",
              "title": "Optimisation performance",
              "description": "Lazy loading, Suspense boundaries, preload fonts",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-006b", "UI-006c", "UI-006d"]
            },
            {
              "id": "UI-006f",
              "title": "TNR Final Homepage",
              "description": "Lighthouse audit (LCP, CLS, FID), test visuel complet",
              "status": "pending",
              "blocking": false,
              "depends_on": ["UI-006e"]
            }
          ]
        }
      ]
    }
  ]
}